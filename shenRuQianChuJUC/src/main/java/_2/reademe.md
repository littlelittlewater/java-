automatic主要是通过调用底层的unsafe的一个本地方法CAS。
CAS通过调用JNI的代码实现的。
JNI:Java Native Interface为JAVA本地调用，允许java调用其他语言。
关于CPU的锁有如下3种：
1. 处理器自动保证基本内存操作的原子性。
1. 使用总线锁保证原子性。
    所谓总线锁就是使用处理器提供的一个LOCK＃信号，当一个处理器在总线上输出此信号时，其他处理器的请求将被阻塞住,那么该处理器可以独占使用共享内存。
1. 使用缓存锁保证原子性。
    处理理器不在总线上声言LOCK＃信号，而是修改内部的内存地址，并允许它的缓存一致性机制来保证操作的原子性，
    MESI 协议是以缓存行(缓存的基本数据单位，在Intel的CPU上一般是64字节)的几个状态来命名的(全名是Modified、Exclusive、 Share or Invalid)。该协议要求在每个缓存行上维护两个状态位，使得每个数据单位可能处于M、E、S和I这四种状态之一。
    缓存一致性机制整体来说，是当某块CPU对缓存中的数据进行操作了之后，就通知其他CPU放弃储存在它们内部的缓存，或者从主内存中重新读取。

CAS 算法和 voliate 变量是整个juc的基础

CAS 会存在aba问题